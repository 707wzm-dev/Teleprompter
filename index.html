<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Teleprompter Voz Android</title>

<style>
body {
  margin: 0;
  background: black;
  color: white;
  font-family: Arial, sans-serif;
  overflow: hidden;
}

#viewport {
  height: 100vh;
  overflow: hidden;
}

#text {
  padding: 40px;
  padding-bottom: 60vh; /* evita que se corte al final */
  font-size: 38px;
  line-height: 1.4;
  max-width: 90%;
  margin: auto;
  transform-origin: top;
}

.mirror {
  transform: scaleX(-1);
}

#controls {
  position: fixed;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  background: rgba(0,0,0,0.75);
  padding: 8px;
  border-radius: 10px;
  z-index: 10;
}

button {
  font-size: 14px;
  padding: 6px 10px;
}
</style>
</head>

<body>

<div id="viewport">
  <div id="text" contenteditable="true">
Pega aquÃ­ tu texto del teleprompter.

Pulsa ğŸ™ï¸ una vez para iniciar.
Pulsa otra vez para detener.
  </div>
</div>

<div id="controls">
  <button id="micBtn">ğŸ™ï¸ Mic</button>
  <button id="mirrorBtn">ğŸª Mirror</button>
  <button id="plusBtn">A+</button>
  <button id="minusBtn">A-</button>
  <button id="marginPlus">â• Margen</button>
  <button id="marginMinus">â– Margen</button>
  <button id="leftBtn">â¬…ï¸</button>
  <button id="centerBtn">â¬†ï¸</button>
  <button id="rightBtn">â¡ï¸</button>
</div>

<script>
const viewport = document.getElementById("viewport");
const text = document.getElementById("text");

const micBtn = document.getElementById("micBtn");
const mirrorBtn = document.getElementById("mirrorBtn");
const plusBtn = document.getElementById("plusBtn");
const minusBtn = document.getElementById("minusBtn");
const marginPlus = document.getElementById("marginPlus");
const marginMinus = document.getElementById("marginMinus");
const leftBtn = document.getElementById("leftBtn");
const centerBtn = document.getElementById("centerBtn");
const rightBtn = document.getElementById("rightBtn");

let recognition;
let listening = false;

/* SCROLL SUAVE */
let scrolling = false;
let speed = 0.35; // ajusta si quieres mÃ¡s rÃ¡pido o lento

function smoothScroll() {
  if (scrolling) {
    viewport.scrollTop += speed;
  }
  requestAnimationFrame(smoothScroll);
}
smoothScroll();

/* MICRÃ“FONO (solo ON / OFF) */
micBtn.onclick = () => {
  const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
  if (!SR) {
    alert("Este navegador no soporta reconocimiento de voz");
    return;
  }

  if (!listening) {
    recognition = new SR();
    recognition.lang = "es-ES";
    recognition.continuous = true;
    recognition.interimResults = false;

    recognition.onend = () => {
      if (listening) recognition.start();
    };

    recognition.start();
    scrolling = true;
    listening = true;
    micBtn.style.background = "green";
  } else {
    listening = false;
    scrolling = false;
    recognition.stop();
    micBtn.style.background = "";
  }
};

/* ESPEJO */
mirrorBtn.onclick = () => {
  viewport.classList.toggle("mirror");
};

/* TAMAÃ‘O TEXTO */
let font = 38;
plusBtn.onclick = () => {
  font += 2;
  text.style.fontSize = font + "px";
};
minusBtn.onclick = () => {
  font = Math.max(16, font - 2);
  text.style.fontSize = font + "px";
};

/* MÃRGENES (FUNCIONAN REALMENTE) */
let width = 90;
marginPlus.onclick = () => {
  width = Math.min(100, width + 5);
  text.style.maxWidth = width + "%";
};
marginMinus.onclick = () => {
  width = Math.max(40, width - 5);
  text.style.maxWidth = width + "%";
};

/* ALINEACIÃ“N */
leftBtn.onclick = () => text.style.textAlign = "left";
centerBtn.onclick = () => text.style.textAlign = "center";
rightBtn.onclick = () => text.style.textAlign = "right";
</script>

</body>
</html>
